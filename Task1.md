## Задание
Есть папка с файлами, размер папки 4.5Гб, в каждом файле структурированные данные (json), в каждом файле содержатся данные по одному заказу, файлы периодически добавляются.
Структура данных - Заказ (Покупатель, товары, стоимость). Покупатель, товары - вложенными объектами в заказе.
Покупатель: ID, Имя
Товар: ID, Название
Предложить архитектуру приложения (Как описать классы и какая у каждого класса функция)
Приложение должно будет выполнять поиск (без использования внешней БД), необходимые выборки: 
1. Выборка "Топ 10 товаров" по кол-ву заказов, в которых эти товары участвовали.
2. Выборка "Топ 10 покупателей" по общей сумме заказов, в которых эти покупатели участвовали.
3. Выборка заказов по товару/товарам (по массиву id товаров)
Организовать подготовку данных для поиска либо кеширование, описать логику этого процесса.
Предусмотреть смену источника данных, т.е вместо файлов в будущем может быть БД или другое хранилище.

## Ответ

__index.php__
  фронт-контроллер, входная точка + параметры инициализации

__router.php__
	парсинг URL и вызов нужного контроллера

__Controllers__

  __IndexController.php__
  
    index()
    	инициализация приложения (создание кэша, если его нет), начальная страница
    
    reinit()
	    переинциализация приложения (пересоздание кэша), редирект на главную страницу
  
  __SearchController.php__
    
    filter()
    	поиск по параметрам (по покупателю, по товару и т.п.), страница с результатами поиска
    
    report()
    	получение данных для спец.выборок (топы), страница срезультатами

__Services__

  __CacheService.php__
  создание кэша для ускорения поиска, делаем кэш в виде хэш-таблиц
    
    constructor(CacheProvider)
    
    check()
    	проверки кэшей (на существование и корректность)
      
    create(type)
    	создание кэша TYPE
      
    add(type, data)
    	добавлем в кэш TYPE данные DATA
      
    remove(type, data)
    	удаляем из кэша TYPE данные DATA
      
    search(type, data)
    	поиск в кэше TYPE данные DATA
  
  __DataService.php__
	получение данных из источника
  
    counstructor(SourceProdiver)
    
    getTop10OrdersByProdut()
    	Выбираем из кэша товаров записи с максимальным количеством заказов. По кэшу заказов достаем данные заказов, из которых достаем данные товара, пока не найдем данные по всем интересующим товарам.
    
    getTop10CustomersBySum()
    	Перебираем кэш покупателей. Для каждого покупателя считаем сумму по заказам. Выбираем 10 с наибольшей суммой.
    
    getOrdersByProducts(ids)
    	Выбираем из кэша товары по id, из каждой записи вытаскиваем id заказов. Потом по кэшу заказов определяем файлы. Читаем файлы, отдаем данные

__Providers__

  __CacheProvider.php__
  	работа с кэшем
    all()
    
    netx()
    
    prev()
    
    end()
    
    offset()
  
  __SourceProvider.php__
  	работа с источником данных. Использует кэш заказов для выбора и чтения файла.
    
    find(id)
    	чтение данных из файла заказа по id заказа
    
    listDir()
    	список имен файлов с данными
 
__Storage__
  - order1.json
  - ...
  - orderN.json

---
  Кэш товваров
    id товара => массив заказов

  Кэш покупателей
    id покупателя => массив заказов
  
  Кэш заказов
    id заказа => имя файла
___
